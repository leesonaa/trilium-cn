{"version":3,"file":"setup.js","mappings":"UAAIA,EACAC,E,8DCKJ,SAASC,EAAmBC,EAAkBC,EAASC,EAAY,MAC/DC,EAAeC,EAAEC,UAAWL,EAAkBC,EAASC,EAC3D,CAEA,SAASC,EAAeG,EAAKN,EAAkBC,EAASC,EAAY,MAChE,GAAI,sBAAmB,CACnBF,EAAmBO,EAAkBP,GAErC,IAAIQ,EAAY,UAEZN,IACAM,GAAa,IAAIN,IAGjBI,EAAIG,IAAID,IAIRR,GACAM,EAAII,KAAKF,EAAWR,GAAkBW,IAClCV,EAAQU,GAERA,EAAEC,iBACFD,EAAEE,iBAAiB,GAG/B,CACJ,CAKA,SAASN,EAAkBO,GACvB,OAAKA,EAIEA,EACFC,cACAC,QAAQ,QAAS,UACjBA,QAAQ,SAAU,OAClBA,QAAQ,WAAY,YACpBA,QAAQ,WAAY,YARdF,CASf,CAEA,SACIf,qBACAI,iBACAc,qBApDJ,SAA8Bf,GAC1BH,EAAmB,GAAI,KAAMG,EACjC,EAmDIK,oB,8BCtCJ,SAASW,EAAOC,GACZ,MAAO,GAAGA,GAAO,EAAI,IAAM,KAAKA,GACpC,CAoDA,SAASC,EAAcC,GACnB,MAAO,GAAGA,EAAKC,iBAAiBJ,EAAOG,EAAKE,WAAa,MAAML,EAAOG,EAAKG,YAC/E,CAcA,SAASC,IACL,SAAUC,QAAUA,OAAOC,SAAWD,OAAOC,QAAQC,KACzD,CAEA,SAASC,IACL,OAAOC,UAAUC,SAASC,QAAQ,QAAU,CAChD,C,uBAeA,MAAMC,EAAY,CACd,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,UAkFT,SAASC,IACDC,KAAKC,eACLD,KAAKC,aAAaC,MAAM,QACxBF,KAAKC,aAAe,KAE5B,CAEA,IAAIE,EAAsB,KAG1B,SAASC,IACLD,EAAsBlC,EAAE,SAC5B,CAEA,SAASoC,IACL,GAAKF,EAAL,CAIA,GAAIA,EAAoBG,SAAS,MAAO,CAIpC,MAAMC,EAASJ,EACVK,QAAQ,wBACRC,KAAK,oBAENF,EACAA,EAAOG,QAAQC,KAAKC,QAEpBC,QAAQC,IAAI,yDAEpB,MACIX,EAAoBS,QAGxBT,EAAsB,IAnBtB,CAoBJ,CAsDA,SAASY,EAAeC,GACpB,MAAuC,oBAA5B,QACA,QAAwBA,GAGxB,QAAQA,EAEvB,CAoCA,MAAMC,EAAc,yCAEpB,SAASC,EAASC,GACd,MAAMC,EAAWD,EAAQE,KAAK,kBAE9B,GAAID,EAAU,CACV,MAAME,EAAML,EAAcG,EAE1B7B,OAAOgC,KAAKD,EAAK,SACrB,CACJ,CAEA,SAASE,EAAgBrD,GAGrBA,EAAIsD,GAAG,SAASjD,IAEZ0C,EADoBjD,EAAEO,EAAEkD,QAAQlB,QAAQ,oBACnB,GAE7B,CAMA,MAAMmB,EAAoB,IAAIC,OAAO,sBAAuB,KAoJ5D,GACIC,kBA1fJ,SAA2BC,GACnBA,GACAC,QAAQ,wBAAwBD,KAGpCvC,OAAOyC,SAASC,QACpB,EAqfIC,UAnfJ,SAAmBC,GACf,IACI,OAAO,IAAIC,KAAKA,KAAKC,MAAMF,GAC/B,CACA,MAAO3D,GACH,MAAM,IAAI8D,MAAM,0BAA0BH,OAAS3D,EAAE+D,WAAW/D,EAAEgE,QACtE,CACJ,EA6eIvD,gBACAwD,eAlbJ,SAAwBvD,GACpB,MAAO,GAbX,SAAoBA,GAIhB,OAAOD,EAAcC,EACzB,CAQcwD,CAAWxD,MAvDzB,SAAoBA,GAChB,MAAO,GAAGH,EAAOG,EAAKyD,eAAe5D,EAAOG,EAAK0D,eACrD,CAqDkCC,CAAW3D,IAC7C,EAibI4D,mBAjeJ,SAA4BC,GACxB,MAAMC,EAAUC,KAAKC,MAAMH,EAAK,KAC1BI,EAAUF,KAAKG,MAAMJ,EAAU,IAC/BK,EAAQJ,KAAKG,MAAMD,EAAU,IAC7BG,EAAOL,KAAKG,MAAMC,EAAQ,IAC1BE,EAAS,CAACC,EAAOC,IAAS,GAAGD,KAASC,IACtCC,EAAW,GAwBjB,OAtBIJ,EAAO,GACPI,EAASC,KAAKJ,EAAOD,EAAM,MAG3BA,EAAO,IACHD,EAAQ,GAAK,GACbK,EAASC,KAAKJ,EAAOF,EAAQ,GAAI,OAGjCA,EAAQ,IACJF,EAAU,GAAK,GACfO,EAASC,KAAKJ,EAAOJ,EAAU,GAAI,OAGnCA,EAAU,GACNH,EAAU,GAAK,GACfU,EAASC,KAAKJ,EAAOP,EAAU,GAAI,QAM5CU,EAASE,KAAK,KACzB,EAmcIC,WApYJ,SAAoBC,GAGhB,OAFAA,EAAOb,KAAKc,IAAId,KAAKC,MAAMY,EAAO,MAAO,IAE9B,KACA,GAAGA,QAGAb,KAAKC,MAAMY,EAAO,OAAS,GAA9B,MAEf,EA4XIE,iBAjbJ,WACI,OAAOC,QAAQC,OAAO,4BAC1B,EAgbIC,IA9aJ,WACI,MA1DO,GAAGpF,GADiBG,EA2DE,IAAIkD,MA1DXO,eAAe5D,EAAOG,EAAK0D,iBAAiB7D,EAAOG,EAAKkF,gBADlF,IAA+BlF,CA4D/B,EA6aII,aACAI,QACA2E,UAraJ,SAAmBC,GACf,OAAS5E,KAAW4E,EAAIC,SAChB7E,KAAW4E,EAAIE,OAC3B,EAmaIC,gBAjaJ,WACI,IAAK,MAAMC,KAAKC,UACPA,UAAUD,IACX7D,QAAQ+D,MAAM,gBAAgBF,0BAA0BC,UAAUD,KAG9E,EA4ZIG,WA/YJ,SAAoB1C,GAChB,OAAOA,EAAItD,QAAQ,gBAAgBiG,GAAKhF,EAAUgF,IACtD,EA8YIC,SAjYJ,SAAkBC,EAAOC,GACrB,MAAMC,EAAM,CAAC,EAEb,IAAK,MAAMC,KAAQH,EAAO,CACtB,MAAOI,EAAKC,GAASJ,EAAGE,GAExBD,EAAIE,GAAOC,CACf,CAEA,OAAOH,CACX,EAwXII,aAtXJ,SAAsBC,GAClB,IAAIC,EAAO,GAGX,IAAK,IAAId,EAAI,EAAGA,EAAIa,EAAKb,IACrBc,GAHa,iEAGIC,OAAOxC,KAAKG,MAAsBsC,GAAhBzC,KAAK0C,WAG5C,OAAOH,CACX,EA8WII,SA5WJ,WACI,MAA+B,WAAxBrG,OAAOS,MAAM6F,SAEXtG,OAAOS,MAAM6F,QAAU,OAAOC,KAAKnG,UAAUoG,UAC1D,EAyWIC,UAvWJ,WACI,MAA+B,YAAxBzG,OAAOS,MAAM6F,SAEXtG,OAAOS,MAAM6F,SAAW,OAAOC,KAAKnG,UAAUoG,UAC3D,EAoWIE,UA/VJ,SAAmBxC,EAAM4B,GACrB,MACMa,EAAU,aADH,IAAI9D,KAAKA,KAAK+B,MAAQ,SACDgC,gBAElCjI,SAASkI,OAAS,GAAG3C,KAAQ4B,GAAS,KAAKa,IAC/C,EA2VIG,iBAzVJ,SAA0B5G,GACtB,MAAO,QAAQA,GACnB,EAwVI6G,iBAtVJ,SAA0BC,GACtB,IAAKA,EACD,MAAO,GAGX,MAAMC,EAAeD,EAAK1G,QAAQ,KAOlC,OALsB,IAAlB2G,IAEAD,EAAOA,EAAKE,OAAO,EAAGD,IAGnB,QAAQD,EAAK3H,cAAcC,QAAQ,UAAW,MACzD,EA0UIkB,oBACA2G,WAlSJC,eAA0BC,EAASC,GAAiB,GAC5CA,IACA9G,IACAC,KAAKC,aAAe2G,GAGxBxG,IAEAwG,EAAQ1G,QAER0G,EAAQnF,GAAG,mBAAmB,KAC1BxD,EAAE,aAAa6I,aAAa,SAEvB9G,KAAKC,cAAgBD,KAAKC,eAAiB2G,GAC5CvG,GACJ,WAGkC,+BAAiC0G,QAChDC,yBAAyBJ,EACpD,EA+QIxG,qBACAC,oBACA4G,YA/QJ,SAAqBC,GACjB,QAAKA,IAEsB,iBAATA,GACdC,SAAS,8BAA8BD,iCAChC,IAGXA,EAAOA,EAAKtI,eAECwI,SAAS,SACdF,EAAKE,SAAS,aAEgC,IAA/CnJ,EAAE,SAASiJ,KAAKA,GAAM1B,OAAO6B,OAAOC,QAC/C,EAkQIC,kBAhQJZ,iBACI,GAAIrH,IAAc,CACd,MAAMkI,EAAMzG,EAAe,oBAAoB0G,yBACzCD,EAAIE,YAAYC,QAAQC,YAClC,CACJ,EA4PIC,yBA1PJ,WACI,MAAMrC,EAAOjG,OAAOuI,eAAeC,WAC/BpI,UAAUqI,WACVrI,UAAUqI,UAAUC,UAAUzC,EAEtC,EAsPIzE,iBACAmH,UA5OJ,SAAmBC,EAASC,EAASC,GACjC,IAAKF,IAAYA,EAAQG,KACrB,OAAOH,EAIX,MAAMI,EAAQ,IAAIjG,MAAM+F,GAAgB,+BAA+BD,KAEvE,OAAO,IAAII,SAAQ,CAACC,EAAKC,KACrB,IAAIC,GAAW,EAEfR,EAAQG,MAAKM,IACTD,GAAW,EAEXF,EAAIG,EAAO,IAGfC,YAAW,KACFF,GACDD,EAAIH,EACR,GACDH,EAAQ,GAEnB,EAsNIU,iBApNJ,SAA0B3K,GAEtB,MAAM4K,EAAgB5K,EAAI6K,KAAK,iCAC/BD,EAActH,GAAG,SAASjD,GAAKA,EAAEE,oBAGjC8C,EAAgBuH,EACpB,EA8MIvH,kBACAN,WACA+H,oBAzLJ,SAA6BxF,GACzB,OAAOA,EAAK5E,QAAQ,oBAAqB,GAC7C,EAwLIqK,qBApLJ,SAA8BzF,GAC1B,OAAO9B,EAAkBmE,KAAKrC,EAClC,EAmLI0F,MAjLJ,SAAeC,GACX,OAAO,IAAIZ,SAASa,IAChBR,WAAWQ,EAASD,EAAQ,GAEpC,EA8KIE,aA5KJ,SAAsBnH,GAClB,OAAOA,EAAItD,QAAQ,8BAA+B,OACtD,EA2KI0K,gBAzKJ,WACI,IAAI7E,EAAG8E,EAAGC,EAAWC,EAErB,SAASC,EAAiBC,EAAGC,GACzB,IAAIC,EAIJ,GAAIC,MAAMH,IAAMG,MAAMF,IAAmB,iBAAND,GAA+B,iBAANC,EACxD,OAAO,EAMX,GAAID,IAAMC,EACN,OAAO,EAMX,GAAkB,mBAAND,GAAiC,mBAANC,GAClCD,aAAaxH,MAAQyH,aAAazH,MAClCwH,aAAahI,QAAUiI,aAAajI,QACpCgI,aAAaI,QAAUH,aAAaG,QACpCJ,aAAaK,QAAUJ,aAAaI,OACrC,OAAOL,EAAE7B,aAAe8B,EAAE9B,WAI9B,KAAM6B,aAAaM,QAAUL,aAAaK,QACtC,OAAO,EAGX,GAAIN,EAAEO,cAAcN,IAAMA,EAAEM,cAAcP,GACtC,OAAO,EAGX,GAAIA,EAAEQ,cAAgBP,EAAEO,YACpB,OAAO,EAGX,GAAIR,EAAES,YAAcR,EAAEQ,UAClB,OAAO,EAIX,GAAIZ,EAAU5J,QAAQ+J,IAAM,GAAKF,EAAW7J,QAAQgK,IAAM,EACtD,OAAO,EAKX,IAAKC,KAAKD,EAAG,CACT,GAAIA,EAAES,eAAeR,KAAOF,EAAEU,eAAeR,GACzC,OAAO,EAEN,UAAWD,EAAEC,WAAcF,EAAEE,GAC9B,OAAO,CAEf,CAEA,IAAKA,KAAKF,EAAG,CACT,GAAIC,EAAES,eAAeR,KAAOF,EAAEU,eAAeR,GACzC,OAAO,EAEN,UAAWD,EAAEC,WAAcF,EAAEE,GAC9B,OAAO,EAGX,cAAgBF,EAAEE,IACd,IAAK,SACL,IAAK,WAKD,GAHAL,EAAU9F,KAAKiG,GACfF,EAAW/F,KAAKkG,IAEXF,EAAiBC,EAAEE,GAAID,EAAEC,IAC1B,OAAO,EAGXL,EAAUc,MACVb,EAAWa,MACX,MAEJ,QACI,GAAIX,EAAEE,KAAOD,EAAEC,GACX,OAAO,EAIvB,CAEA,OAAO,CACX,CAEA,GAAInF,UAAU2C,OAAS,EACnB,OAAO,EAIX,IAAK5C,EAAI,EAAG8E,EAAI7E,UAAU2C,OAAQ5C,EAAI8E,EAAG9E,IAKrC,GAHA+E,EAAY,GACZC,EAAa,IAERC,EAAgBhF,UAAU,GAAIA,UAAUD,IACzC,OAAO,EAIf,OAAO,CACX,EAyDI8F,oBAvDJ,SAA6BC,GACzB,MAAMC,EAAgB,IAAIC,cAAc,CACpC,YAAa,IAAIC,KAAK,CAACH,GAAU,CAAChL,KAAM,cACxC,aAAc,IAAImL,KAAK,CAACH,GAAU,CAAChL,KAAM,iBAG7CE,UAAUqI,UAAU6C,MAAM,CAACH,GAC/B,EAiDII,kBA3CJ,SAA2BC,GACvB,MAAO,cAAcA,EAAKC,UAAUC,mBAAmBF,EAAKG,oBAAoB9I,KAAK+B,OACzF,E,WCvfA,SAASgH,EAAoBC,GAC5B,IAAI5M,EAAI,IAAI8D,MAAM,uBAAyB8I,EAAM,KAEjD,MADA5M,EAAE6M,KAAO,mBACH7M,CACP,CACA2M,EAAoBG,KAAO,IAAM,GACjCH,EAAoB9B,QAAU8B,EAC9BA,EAAoBI,GAAK,KACzBC,EAAOC,QAAUN,C,GCPbO,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaJ,QAGrB,IAAID,EAASE,EAAyBE,GAAY,CAGjDH,QAAS,CAAC,GAOX,OAHAM,EAAoBH,GAAUJ,EAAQA,EAAOC,QAASE,GAG/CH,EAAOC,OACf,CAGAE,EAAoBK,EAAID,ECxBxBJ,EAAoBM,EAAI,CAACR,EAASS,KACjC,IAAI,IAAI9G,KAAO8G,EACXP,EAAoBQ,EAAED,EAAY9G,KAASuG,EAAoBQ,EAAEV,EAASrG,IAC5E8E,OAAOkC,eAAeX,EAASrG,EAAK,CAAEiH,YAAY,EAAMC,IAAKJ,EAAW9G,IAE1E,ECNDuG,EAAoBY,EAAI,CAAC,EAGzBZ,EAAoBnN,EAAKgO,GACjBhE,QAAQiE,IAAIvC,OAAOoB,KAAKK,EAAoBY,GAAGG,QAAO,CAACC,EAAUvH,KACvEuG,EAAoBY,EAAEnH,GAAKoH,EAASG,GAC7BA,IACL,KCNJhB,EAAoBiB,EAAKJ,GAEZA,EAAU,MCHvBb,EAAoBQ,EAAI,CAACjH,EAAKzE,IAAUyJ,OAAOG,UAAUC,eAAeuC,KAAK3H,EAAKzE,GRA9E/C,EAAa,CAAC,EACdC,EAAoB,WAExBgO,EAAoBnC,EAAI,CAAClI,EAAKwL,EAAM1H,EAAKoH,KACxC,GAAG9O,EAAW4D,GAAQ5D,EAAW4D,GAAKqC,KAAKmJ,OAA3C,CACA,IAAIC,EAAQC,EACZ,QAAWlB,IAAR1G,EAEF,IADA,IAAI6H,EAAU/O,SAASgP,qBAAqB,UACpCxI,EAAI,EAAGA,EAAIuI,EAAQ3F,OAAQ5C,IAAK,CACvC,IAAII,EAAImI,EAAQvI,GAChB,GAAGI,EAAEqI,aAAa,QAAU7L,GAAOwD,EAAEqI,aAAa,iBAAmBxP,EAAoByH,EAAK,CAAE2H,EAASjI,EAAG,KAAO,CACpH,CAEGiI,IACHC,GAAa,GACbD,EAAS7O,SAASkP,cAAc,WAEzBC,QAAU,QACjBN,EAAOO,QAAU,IACb3B,EAAoB4B,IACvBR,EAAOS,aAAa,QAAS7B,EAAoB4B,IAElDR,EAAOS,aAAa,eAAgB7P,EAAoByH,GACxD2H,EAAOU,IAAMnM,GAEd5D,EAAW4D,GAAO,CAACwL,GACnB,IAAIY,EAAmB,CAACC,EAAMC,KAE7Bb,EAAOc,QAAUd,EAAOe,OAAS,KACjCC,aAAaT,GACb,IAAIU,EAAUtQ,EAAW4D,GAIzB,UAHO5D,EAAW4D,GAClByL,EAAOkB,YAAclB,EAAOkB,WAAWC,YAAYnB,GACnDiB,GAAWA,EAAQG,SAASlJ,GAAQA,EAAG2I,KACpCD,EAAM,OAAOA,EAAKC,EAAM,EAExBN,EAAUzE,WAAW6E,EAAiBnP,KAAK,UAAMuN,EAAW,CAAErM,KAAM,UAAWiC,OAAQqL,IAAW,MACtGA,EAAOc,QAAUH,EAAiBnP,KAAK,KAAMwO,EAAOc,SACpDd,EAAOe,OAASJ,EAAiBnP,KAAK,KAAMwO,EAAOe,QACnDd,GAAc9O,SAASkQ,KAAKC,YAAYtB,EAnCkB,CAmCX,EStChDpB,EAAoB2C,EAAK7C,IACH,oBAAX8C,QAA0BA,OAAOC,aAC1CtE,OAAOkC,eAAeX,EAAS8C,OAAOC,YAAa,CAAEnJ,MAAO,WAE7D6E,OAAOkC,eAAeX,EAAS,aAAc,CAAEpG,OAAO,GAAO,ECL9DsG,EAAoB7B,EAAI,2B,MCKxB,IAAI2E,EAAkB,CACrB,IAAK,GAGN9C,EAAoBY,EAAEmC,EAAI,CAAClC,EAASG,KAElC,IAAIgC,EAAqBhD,EAAoBQ,EAAEsC,EAAiBjC,GAAWiC,EAAgBjC,QAAWV,EACtG,GAA0B,IAAvB6C,EAGF,GAAGA,EACFhC,EAAShJ,KAAKgL,EAAmB,QAC3B,CAGL,IAAIxG,EAAU,IAAIK,SAAQ,CAACa,EAASuF,IAAYD,EAAqBF,EAAgBjC,GAAW,CAACnD,EAASuF,KAC1GjC,EAAShJ,KAAKgL,EAAmB,GAAKxG,GAGtC,IAAI7G,EAAMqK,EAAoB7B,EAAI6B,EAAoBiB,EAAEJ,GAEpDjE,EAAQ,IAAIjG,MAgBhBqJ,EAAoBnC,EAAElI,GAfFsM,IACnB,GAAGjC,EAAoBQ,EAAEsC,EAAiBjC,KAEf,KAD1BmC,EAAqBF,EAAgBjC,MACRiC,EAAgBjC,QAAWV,GACrD6C,GAAoB,CACtB,IAAIE,EAAYjB,IAAyB,SAAfA,EAAMnO,KAAkB,UAAYmO,EAAMnO,MAChEqP,EAAUlB,GAASA,EAAMlM,QAAUkM,EAAMlM,OAAO+L,IACpDlF,EAAMhG,QAAU,iBAAmBiK,EAAU,cAAgBqC,EAAY,KAAOC,EAAU,IAC1FvG,EAAM9E,KAAO,iBACb8E,EAAM9I,KAAOoP,EACbtG,EAAMwG,QAAUD,EAChBH,EAAmB,GAAGpG,EACvB,CACD,GAEwC,SAAWiE,EAASA,EAE/D,CACD,EAcF,IAAIwC,EAAuB,CAACC,EAA4BC,KACvD,IAGItD,EAAUY,GAHT2C,EAAUC,EAAaC,GAAWH,EAGhBxK,EAAI,EAC3B,GAAGyK,EAASG,MAAM/D,GAAgC,IAAxBkD,EAAgBlD,KAAa,CACtD,IAAIK,KAAYwD,EACZzD,EAAoBQ,EAAEiD,EAAaxD,KACrCD,EAAoBK,EAAEJ,GAAYwD,EAAYxD,IAG7CyD,GAAsBA,EAAQ1D,EAClC,CAEA,IADGsD,GAA4BA,EAA2BC,GACrDxK,EAAIyK,EAAS7H,OAAQ5C,IACzB8H,EAAU2C,EAASzK,GAChBiH,EAAoBQ,EAAEsC,EAAiBjC,IAAYiC,EAAgBjC,IACrEiC,EAAgBjC,GAAS,KAE1BiC,EAAgBjC,GAAW,CAC5B,EAIG+C,EAAqBC,OAA4B,oBAAIA,OAA4B,qBAAK,GAC1FD,EAAmBpB,QAAQa,EAAqBzQ,KAAK,KAAM,IAC3DgR,EAAmB5L,KAAOqL,EAAqBzQ,KAAK,KAAMgR,EAAmB5L,KAAKpF,KAAKgR,G,gDCpEvF,SAASE,EAAKC,GAGV,OAFAxR,SAASyR,YAAYD,IAEd,CACX,CC4DA/I,eAAeiJ,IACX,MAAM,qBAAEC,EAAoB,YAAEC,SAAsB7R,EAAEqO,IAAI,kBAE1D,GAAIwD,EACA,GAAIC,EAAA,qBAAoB,CACpB,MAAMC,EAASD,EAAA,uBAAqB,oBACpCC,EAAOC,IAAIC,WACXF,EAAOC,IAAIE,KAAK,EACpB,MAEIJ,EAAA,iCAIJ9R,EAAE,sBAAsBiJ,KAAK2I,EAErC,CAEA,SAASO,EAAU7N,GACftE,EAAE,UAAUiJ,KAAK3E,GACjBtE,EAAE,UAAUoS,MAChB,CD/FQN,EAAA,sBAAsBA,EAAA,kBACtB,uBAAmC,UAAU,IAAMN,EAAK,UACxD,uBAAmC,UAAU,IAAMA,EAAK,WACxD,uBAAmC,UAAU,IAAMA,EAAK,SACxD,uBAAmC,UAAU,IAAMA,EAAK,eACxD,uBAAmC,UAAU,IAAMA,EAAK,UACxD,uBAAmC,UAAU,IAAMA,EAAK,WC+FhEa,GAAGC,cAAc,IAvGjB,WACQC,gBACAC,YAAYb,EAAuB,KAGvC,MAAMc,EAAgB,GAAG1O,SAAS2O,aAAa3O,SAAS4O,OAExD3S,EAAE,iBAAiBiJ,KAAKwJ,GAExBG,KAAKC,KAAOR,GAAGS,WAAWP,eAAiB,mBAAqB,cAChEK,KAAKG,UAAYV,GAAGS,aAEpBF,KAAKI,iBAAmBX,GAAGS,YAAW,GACtCF,KAAKK,qBAAuBZ,GAAGS,YAAW,GAC1CF,KAAKM,oBAAsBb,GAAGS,YAAW,GAEzCF,KAAKO,eAAiBd,GAAGS,aACzBF,KAAKQ,UAAYf,GAAGS,aACpBF,KAAKS,SAAWhB,GAAGS,aAEnBF,KAAKU,kBAAoB,MAAQV,KAAKG,YAEtCH,KAAKW,gBAAkB,KACM,iBAArBX,KAAKG,aACLH,KAAKC,KAAK,4BAEV7S,EAAEwT,KAAK,0BAA0BnJ,MAAK,KAClC/I,OAAOyC,SAASnD,QAAQ,UAAU,KAItCgS,KAAKC,KAAKD,KAAKG,YACnB,EAGJH,KAAKa,KAAO,KACRb,KAAKC,KAAK,cAEVD,KAAKG,UAAU,GAAG,EAGtBH,KAAKc,OAAShL,UACV,MAAMyK,EAAiBP,KAAKO,iBACtBC,EAAYR,KAAKQ,YACjBC,EAAWT,KAAKS,WAEtB,IAAKF,EAED,YADAhB,EAAU,oBAId,IAAKkB,EAED,YADAlB,EAAU,UAKd,MAAMwB,QAAa3T,EAAEwT,KAAK,6BAA8B,CACpDL,eAAgBA,EAChBC,UAAWA,EACXC,SAAUA,IAGM,YAAhBM,EAAKhJ,QACLiI,KAAKC,KAAK,oBAEVL,YAAYb,EAAuB,KAkC3C3R,EAAE,UAAU4T,QA7BJzB,EAAU,sBAAsBwB,EAAKrJ,QACzC,CAER,EA6BmCrK,SAAS4T,eAAe,iBAE3D7T,EAAE,iBAAiBoS,M","sources":["webpack://trilium/webpack/runtime/load script","webpack://trilium/./src/public/app/services/shortcuts.js","webpack://trilium/./src/public/app/services/utils.js","webpack://trilium/./src/public/app/services/ sync","webpack://trilium/webpack/bootstrap","webpack://trilium/webpack/runtime/define property getters","webpack://trilium/webpack/runtime/ensure chunk","webpack://trilium/webpack/runtime/get javascript chunk filename","webpack://trilium/webpack/runtime/hasOwnProperty shorthand","webpack://trilium/webpack/runtime/make namespace object","webpack://trilium/webpack/runtime/publicPath","webpack://trilium/webpack/runtime/jsonp chunk loading","webpack://trilium/./src/public/app/services/mac_init.js","webpack://trilium/./src/public/app/setup.js"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"trilium:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import utils from \"./utils.js\";\n\nfunction removeGlobalShortcut(namespace) {\n    bindGlobalShortcut('', null, namespace);\n}\n\nfunction bindGlobalShortcut(keyboardShortcut, handler, namespace = null) {\n    bindElShortcut($(document), keyboardShortcut, handler, namespace);\n}\n\nfunction bindElShortcut($el, keyboardShortcut, handler, namespace = null) {\n    if (utils.isDesktop()) {\n        keyboardShortcut = normalizeShortcut(keyboardShortcut);\n\n        let eventName = 'keydown';\n\n        if (namespace) {\n            eventName += `.${namespace}`;\n\n            // if there's a namespace, then we replace the existing event handler with the new one\n            $el.off(eventName);\n        }\n\n        // method can be called to remove the shortcut (e.g. when keyboardShortcut label is deleted)\n        if (keyboardShortcut) {\n            $el.bind(eventName, keyboardShortcut, e => {\n                handler(e);\n\n                e.preventDefault();\n                e.stopPropagation();\n            });\n        }\n    }\n}\n\n/**\n * Normalize to the form expected by the jquery.hotkeys.js\n */\nfunction normalizeShortcut(shortcut) {\n    if (!shortcut) {\n        return shortcut;\n    }\n\n    return shortcut\n        .toLowerCase()\n        .replace(\"enter\", \"return\")\n        .replace(\"delete\", \"del\")\n        .replace(\"ctrl+alt\", \"alt+ctrl\")\n        .replace(\"meta+alt\", \"alt+meta\"); // alt needs to be first;\n}\n\nexport default {\n    bindGlobalShortcut,\n    bindElShortcut,\n    removeGlobalShortcut,\n    normalizeShortcut\n}\n","function reloadFrontendApp(reason) {\n    if (reason) {\n        logInfo(`Frontend app reload: ${reason}`);\n    }\n\n    window.location.reload();\n}\n\nfunction parseDate(str) {\n    try {\n        return new Date(Date.parse(str));\n    }\n    catch (e) {\n        throw new Error(`Can't parse date from '${str}': ${e.message} ${e.stack}`);\n    }\n}\n\nfunction padNum(num) {\n    return `${num <= 9 ? \"0\" : \"\"}${num}`;\n}\n\nfunction formatTime(date) {\n    return `${padNum(date.getHours())}:${padNum(date.getMinutes())}`;\n}\n\nfunction formatTimeWithSeconds(date) {\n    return `${padNum(date.getHours())}:${padNum(date.getMinutes())}:${padNum(date.getSeconds())}`;\n}\n\nfunction formatTimeInterval(ms) {\n    const seconds = Math.round(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n    const days = Math.floor(hours / 24);\n    const plural = (count, name) => `${count} ${name}`;\n    const segments = [];\n\n    if (days > 0) {\n        segments.push(plural(days, '天'));\n    }\n\n    if (days < 2) {\n        if (hours % 24 > 0) {\n            segments.push(plural(hours % 24, '小时'));\n        }\n\n        if (hours < 4) {\n            if (minutes % 60 > 0) {\n                segments.push(plural(minutes % 60, '分钟'));\n            }\n\n            if (minutes < 5) {\n                if (seconds % 60 > 0) {\n                    segments.push(plural(seconds % 60, '秒'));\n                }\n            }\n        }\n    }\n\n    return segments.join(\", \");\n}\n\n// this is producing local time!\nfunction formatDate(date) {\n    //    return padNum(date.getDate()) + \". \" + padNum(date.getMonth() + 1) + \". \" + date.getFullYear();\n    // instead of european format we'll just use ISO as that's pretty unambiguous\n\n    return formatDateISO(date);\n}\n\n// this is producing local time!\nfunction formatDateISO(date) {\n    return `${date.getFullYear()}-${padNum(date.getMonth() + 1)}-${padNum(date.getDate())}`;\n}\n\nfunction formatDateTime(date) {\n    return `${formatDate(date)} ${formatTime(date)}`;\n}\n\nfunction localNowDateTime() {\n    return dayjs().format('YYYY-MM-DD HH:mm:ss.SSSZZ');\n}\n\nfunction now() {\n    return formatTimeWithSeconds(new Date());\n}\n\nfunction isElectron() {\n    return !!(window && window.process && window.process.type);\n}\n\nfunction isMac() {\n    return navigator.platform.indexOf('Mac') > -1;\n}\n\nfunction isCtrlKey(evt) {\n    return (!isMac() && evt.ctrlKey)\n        || (isMac() && evt.metaKey);\n}\n\nfunction assertArguments() {\n    for (const i in arguments) {\n        if (!arguments[i]) {\n            console.trace(`Argument idx#${i} should not be falsy: ${arguments[i]}`);\n        }\n    }\n}\n\nconst entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n};\n\nfunction escapeHtml(str) {\n    return str.replace(/[&<>\"'`=\\/]/g, s => entityMap[s]);\n}\n\nfunction formatSize(size) {\n    size = Math.max(Math.round(size / 1024), 1);\n\n    if (size < 1024) {\n        return `${size} KiB`;\n    }\n    else {\n        return `${Math.round(size / 102.4) / 10} MiB`;\n    }\n}\n\nfunction toObject(array, fn) {\n    const obj = {};\n\n    for (const item of array) {\n        const [key, value] = fn(item);\n\n        obj[key] = value;\n    }\n\n    return obj;\n}\n\nfunction randomString(len) {\n    let text = \"\";\n    const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    for (let i = 0; i < len; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n\n    return text;\n}\n\nfunction isMobile() {\n    return window.glob?.device === \"mobile\"\n        // window.glob.device is not available in setup\n        || (!window.glob?.device && /Mobi/.test(navigator.userAgent));\n}\n\nfunction isDesktop() {\n    return window.glob?.device === \"desktop\"\n        // window.glob.device is not available in setup\n        || (!window.glob?.device && !/Mobi/.test(navigator.userAgent));\n}\n\n// the cookie code below works for simple use cases only - ASCII only\n// not setting a path so that cookies do not leak into other websites if multiplexed with reverse proxy\n\nfunction setCookie(name, value) {\n    const date = new Date(Date.now() + 10 * 365 * 24 * 60 * 60 * 1000);\n    const expires = `; expires=${date.toUTCString()}`;\n\n    document.cookie = `${name}=${value || \"\"}${expires};`;\n}\n\nfunction getNoteTypeClass(type) {\n    return `type-${type}`;\n}\n\nfunction getMimeTypeClass(mime) {\n    if (!mime) {\n        return \"\";\n    }\n\n    const semicolonIdx = mime.indexOf(';');\n\n    if (semicolonIdx !== -1) {\n        // stripping everything following the semicolon\n        mime = mime.substr(0, semicolonIdx);\n    }\n\n    return `mime-${mime.toLowerCase().replace(/[\\W_]+/g, \"-\")}`;\n}\n\nfunction closeActiveDialog() {\n    if (glob.activeDialog) {\n        glob.activeDialog.modal('hide');\n        glob.activeDialog = null;\n    }\n}\n\nlet $lastFocusedElement = null;\n\n// perhaps there should be saved focused element per tab?\nfunction saveFocusedElement() {\n    $lastFocusedElement = $(\":focus\");\n}\n\nfunction focusSavedElement() {\n    if (!$lastFocusedElement) {\n        return;\n    }\n\n    if ($lastFocusedElement.hasClass(\"ck\")) {\n        // must handle CKEditor separately because of this bug: https://github.com/ckeditor/ckeditor5/issues/607\n        // the bug manifests itself in resetting the cursor position to the first character - jumping above\n\n        const editor = $lastFocusedElement\n            .closest('.ck-editor__editable')\n            .prop('ckeditorInstance');\n\n        if (editor) {\n            editor.editing.view.focus();\n        } else {\n            console.log(\"Could not find CKEditor instance to focus last element\");\n        }\n    } else {\n        $lastFocusedElement.focus();\n    }\n\n    $lastFocusedElement = null;\n}\n\nasync function openDialog($dialog, closeActDialog = true) {\n    if (closeActDialog) {\n        closeActiveDialog();\n        glob.activeDialog = $dialog;\n    }\n\n    saveFocusedElement();\n\n    $dialog.modal();\n\n    $dialog.on('hidden.bs.modal', () => {\n        $(\".aa-input\").autocomplete(\"close\");\n\n        if (!glob.activeDialog || glob.activeDialog === $dialog) {\n            focusSavedElement();\n        }\n    });\n\n    const keyboardActionsService = (await import(\"./keyboard_actions.js\")).default;\n    keyboardActionsService.updateDisplayedShortcuts($dialog);\n}\n\nfunction isHtmlEmpty(html) {\n    if (!html) {\n        return true;\n    } else if (typeof html !== 'string') {\n        logError(`Got object of type '${typeof html}' where string was expected.`);\n        return false;\n    }\n\n    html = html.toLowerCase();\n\n    return !html.includes('<img')\n        && !html.includes('<section')\n        // the line below will actually attempt to load images so better to check for images first\n        && $(\"<div>\").html(html).text().trim().length === 0;\n}\n\nasync function clearBrowserCache() {\n    if (isElectron()) {\n        const win = dynamicRequire('@electron/remote').getCurrentWindow();\n        await win.webContents.session.clearCache();\n    }\n}\n\nfunction copySelectionToClipboard() {\n    const text = window.getSelection().toString();\n    if (navigator.clipboard) {\n        navigator.clipboard.writeText(text);\n    }\n}\n\nfunction dynamicRequire(moduleName) {\n    if (typeof __non_webpack_require__ !== 'undefined') {\n        return __non_webpack_require__(moduleName);\n    }\n    else {\n        return require(moduleName);\n    }\n}\n\nfunction timeLimit(promise, limitMs, errorMessage) {\n    if (!promise || !promise.then) { // it's not actually a promise\n        return promise;\n    }\n\n    // better stack trace if created outside of promise\n    const error = new Error(errorMessage || `Process exceeded time limit ${limitMs}`);\n\n    return new Promise((res, rej) => {\n        let resolved = false;\n\n        promise.then(result => {\n            resolved = true;\n\n            res(result);\n        });\n\n        setTimeout(() => {\n            if (!resolved) {\n                rej(error);\n            }\n        }, limitMs);\n    });\n}\n\nfunction initHelpDropdown($el) {\n    // stop inside clicks from closing the menu\n    const $dropdownMenu = $el.find('.help-dropdown .dropdown-menu');\n    $dropdownMenu.on('click', e => e.stopPropagation());\n\n    // previous propagation stop will also block help buttons from being opened, so we need to re-init for this element\n    initHelpButtons($dropdownMenu);\n}\n\nconst wikiBaseUrl = \"https://github.com/zadam/trilium/wiki/\";\n\nfunction openHelp($button) {\n    const helpPage = $button.attr(\"data-help-page\");\n\n    if (helpPage) {\n        const url = wikiBaseUrl + helpPage;\n\n        window.open(url, '_blank');\n    }\n}\n\nfunction initHelpButtons($el) {\n    // for some reason, the .on(event, listener, handler) does not work here (e.g. Options -> Sync -> Help button)\n    // so we do it manually\n    $el.on(\"click\", e => {\n        const $helpButton = $(e.target).closest(\"[data-help-page]\");\n        openHelp($helpButton);\n    });\n}\n\nfunction filterAttributeName(name) {\n    return name.replace(/[^\\p{L}\\p{N}_:]/ug, \"\");\n}\n\nconst ATTR_NAME_MATCHER = new RegExp(\"^[\\\\p{L}\\\\p{N}_:]+$\", \"u\");\n\nfunction isValidAttributeName(name) {\n    return ATTR_NAME_MATCHER.test(name);\n}\n\nfunction sleep(time_ms) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, time_ms);\n    });\n}\n\nfunction escapeRegExp(str) {\n    return str.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n}\n\nfunction areObjectsEqual () {\n    let i, l, leftChain, rightChain;\n\n    function compare2Objects (x, y) {\n        let p;\n\n        // remember that NaN === NaN returns false\n        // and isNaN(undefined) returns true\n        if (isNaN(x) && isNaN(y) && typeof x === 'number' && typeof y === 'number') {\n            return true;\n        }\n\n        // Compare primitives and functions.\n        // Check if both arguments link to the same object.\n        // Especially useful on the step where we compare prototypes\n        if (x === y) {\n            return true;\n        }\n\n        // Works in case when functions are created in constructor.\n        // Comparing dates is a common scenario. Another built-ins?\n        // We can even handle functions passed across iframes\n        if ((typeof x === 'function' && typeof y === 'function') ||\n            (x instanceof Date && y instanceof Date) ||\n            (x instanceof RegExp && y instanceof RegExp) ||\n            (x instanceof String && y instanceof String) ||\n            (x instanceof Number && y instanceof Number)) {\n            return x.toString() === y.toString();\n        }\n\n        // At last, checking prototypes as good as we can\n        if (!(x instanceof Object && y instanceof Object)) {\n            return false;\n        }\n\n        if (x.isPrototypeOf(y) || y.isPrototypeOf(x)) {\n            return false;\n        }\n\n        if (x.constructor !== y.constructor) {\n            return false;\n        }\n\n        if (x.prototype !== y.prototype) {\n            return false;\n        }\n\n        // Check for infinitive linking loops\n        if (leftChain.indexOf(x) > -1 || rightChain.indexOf(y) > -1) {\n            return false;\n        }\n\n        // Quick checking of one object being a subset of another.\n        // todo: cache the structure of arguments[0] for performance\n        for (p in y) {\n            if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n                return false;\n            }\n            else if (typeof y[p] !== typeof x[p]) {\n                return false;\n            }\n        }\n\n        for (p in x) {\n            if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n                return false;\n            }\n            else if (typeof y[p] !== typeof x[p]) {\n                return false;\n            }\n\n            switch (typeof (x[p])) {\n                case 'object':\n                case 'function':\n\n                    leftChain.push(x);\n                    rightChain.push(y);\n\n                    if (!compare2Objects (x[p], y[p])) {\n                        return false;\n                    }\n\n                    leftChain.pop();\n                    rightChain.pop();\n                    break;\n\n                default:\n                    if (x[p] !== y[p]) {\n                        return false;\n                    }\n                    break;\n            }\n        }\n\n        return true;\n    }\n\n    if (arguments.length < 1) {\n        return true; //Die silently? Don't know how to handle such case, please help...\n        // throw \"Need two or more arguments to compare\";\n    }\n\n    for (i = 1, l = arguments.length; i < l; i++) {\n\n        leftChain = []; //Todo: this can be cached\n        rightChain = [];\n\n        if (!compare2Objects(arguments[0], arguments[i])) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction copyHtmlToClipboard(content) {\n    const clipboardItem = new ClipboardItem({\n        'text/html': new Blob([content], {type: 'text/html'}),\n        'text/plain': new Blob([content], {type: 'text/plain'})\n    });\n\n    navigator.clipboard.write([clipboardItem]);\n}\n\n/**\n * @param {FNote} note\n * @return {string}\n */\nfunction createImageSrcUrl(note) {\n    return `api/images/${note.noteId}/${encodeURIComponent(note.title)}?timestamp=${Date.now()}`;\n}\n\nexport default {\n    reloadFrontendApp,\n    parseDate,\n    formatDateISO,\n    formatDateTime,\n    formatTimeInterval,\n    formatSize,\n    localNowDateTime,\n    now,\n    isElectron,\n    isMac,\n    isCtrlKey,\n    assertArguments,\n    escapeHtml,\n    toObject,\n    randomString,\n    isMobile,\n    isDesktop,\n    setCookie,\n    getNoteTypeClass,\n    getMimeTypeClass,\n    closeActiveDialog,\n    openDialog,\n    saveFocusedElement,\n    focusSavedElement,\n    isHtmlEmpty,\n    clearBrowserCache,\n    copySelectionToClipboard,\n    dynamicRequire,\n    timeLimit,\n    initHelpDropdown,\n    initHelpButtons,\n    openHelp,\n    filterAttributeName,\n    isValidAttributeName,\n    sleep,\n    escapeRegExp,\n    areObjectsEqual,\n    copyHtmlToClipboard,\n    createImageSrcUrl\n};\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 3676;\nmodule.exports = webpackEmptyContext;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"assets/v0.62.4/app-dist/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t350: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = global[\"webpackChunktrilium\"] = global[\"webpackChunktrilium\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","/**\n * Mac specific initialization\n */\nimport utils from \"./utils.js\";\nimport shortcutService from \"./shortcuts.js\";\n\nfunction init() {\n    if (utils.isElectron() && utils.isMac()) {\n        shortcutService.bindGlobalShortcut('meta+c', () => exec(\"copy\"));\n        shortcutService.bindGlobalShortcut('meta+v', () => exec('paste'));\n        shortcutService.bindGlobalShortcut('meta+x', () => exec('cut'));\n        shortcutService.bindGlobalShortcut('meta+a', () => exec('selectAll'));\n        shortcutService.bindGlobalShortcut('meta+z', () => exec('undo'));\n        shortcutService.bindGlobalShortcut('meta+y', () => exec('redo'));\n    }\n}\n\nfunction exec(cmd) {\n    document.execCommand(cmd);\n\n    return false;\n}\n\nexport default {\n    init\n}\n","import utils from \"./services/utils.js\";\nimport macInit from './services/mac_init.js';\n\nmacInit.init();\n\nfunction SetupModel() {\n    if (syncInProgress) {\n        setInterval(checkOutstandingSyncs, 1000);\n    }\n\n    const serverAddress = `${location.protocol}//${location.host}`;\n\n    $(\"#current-host\").html(serverAddress);\n\n    this.step = ko.observable(syncInProgress ? \"sync-in-progress\" : \"setup-type\");\n    this.setupType = ko.observable();\n\n    this.setupNewDocument = ko.observable(false);\n    this.setupSyncFromDesktop = ko.observable(false);\n    this.setupSyncFromServer = ko.observable(false);\n\n    this.syncServerHost = ko.observable();\n    this.syncProxy = ko.observable();\n    this.password = ko.observable();\n\n    this.setupTypeSelected = () => !!this.setupType();\n\n    this.selectSetupType = () => {\n        if (this.setupType() === 'new-document') {\n            this.step('new-document-in-progress');\n\n            $.post('api/setup/new-document').then(() => {\n                window.location.replace(\"./setup\");\n            });\n        }\n        else {\n            this.step(this.setupType());\n        }\n    };\n\n    this.back = () => {\n        this.step(\"setup-type\");\n\n        this.setupType(\"\");\n    };\n\n    this.finish = async () => {\n        const syncServerHost = this.syncServerHost();\n        const syncProxy = this.syncProxy();\n        const password = this.password();\n\n        if (!syncServerHost) {\n            showAlert(\"Trilium服务器地址不能为空\");\n            return;\n        }\n\n        if (!password) {\n            showAlert(\"密码不能为空\");\n            return;\n        }\n\n        // not using server.js because it loads too many dependencies\n        const resp = await $.post('api/setup/sync-from-server', {\n            syncServerHost: syncServerHost,\n            syncProxy: syncProxy,\n            password: password\n        });\n\n        if (resp.result === 'success') {\n            this.step('sync-in-progress');\n\n            setInterval(checkOutstandingSyncs, 1000);\n\n            hideAlert();\n        }\n        else {\n            showAlert(`Sync setup failed: ${resp.error}`);\n        }\n    };\n}\n\nasync function checkOutstandingSyncs() {\n    const { outstandingPullCount, initialized } = await $.get('api/sync/stats');\n\n    if (initialized) {\n        if (utils.isElectron()) {\n            const remote = utils.dynamicRequire('@electron/remote');\n            remote.app.relaunch();\n            remote.app.exit(0);\n        }\n        else {\n            utils.reloadFrontendApp();\n        }\n    }\n    else {\n        $(\"#outstanding-syncs\").html(outstandingPullCount);\n    }\n}\n\nfunction showAlert(message) {\n    $(\"#alert\").html(message);\n    $(\"#alert\").show();\n}\n\nfunction hideAlert() {\n    $(\"#alert\").hide();\n}\n\nko.applyBindings(new SetupModel(), document.getElementById('setup-dialog'));\n\n$(\"#setup-dialog\").show();\n"],"names":["inProgress","dataWebpackPrefix","bindGlobalShortcut","keyboardShortcut","handler","namespace","bindElShortcut","$","document","$el","normalizeShortcut","eventName","off","bind","e","preventDefault","stopPropagation","shortcut","toLowerCase","replace","removeGlobalShortcut","padNum","num","formatDateISO","date","getFullYear","getMonth","getDate","isElectron","window","process","type","isMac","navigator","platform","indexOf","entityMap","closeActiveDialog","glob","activeDialog","modal","$lastFocusedElement","saveFocusedElement","focusSavedElement","hasClass","editor","closest","prop","editing","view","focus","console","log","dynamicRequire","moduleName","wikiBaseUrl","openHelp","$button","helpPage","attr","url","open","initHelpButtons","on","target","ATTR_NAME_MATCHER","RegExp","reloadFrontendApp","reason","logInfo","location","reload","parseDate","str","Date","parse","Error","message","stack","formatDateTime","formatDate","getHours","getMinutes","formatTime","formatTimeInterval","ms","seconds","Math","round","minutes","floor","hours","days","plural","count","name","segments","push","join","formatSize","size","max","localNowDateTime","dayjs","format","now","getSeconds","isCtrlKey","evt","ctrlKey","metaKey","assertArguments","i","arguments","trace","escapeHtml","s","toObject","array","fn","obj","item","key","value","randomString","len","text","charAt","possible","random","isMobile","device","test","userAgent","isDesktop","setCookie","expires","toUTCString","cookie","getNoteTypeClass","getMimeTypeClass","mime","semicolonIdx","substr","openDialog","async","$dialog","closeActDialog","autocomplete","default","updateDisplayedShortcuts","isHtmlEmpty","html","logError","includes","trim","length","clearBrowserCache","win","getCurrentWindow","webContents","session","clearCache","copySelectionToClipboard","getSelection","toString","clipboard","writeText","timeLimit","promise","limitMs","errorMessage","then","error","Promise","res","rej","resolved","result","setTimeout","initHelpDropdown","$dropdownMenu","find","filterAttributeName","isValidAttributeName","sleep","time_ms","resolve","escapeRegExp","areObjectsEqual","l","leftChain","rightChain","compare2Objects","x","y","p","isNaN","String","Number","Object","isPrototypeOf","constructor","prototype","hasOwnProperty","pop","copyHtmlToClipboard","content","clipboardItem","ClipboardItem","Blob","write","createImageSrcUrl","note","noteId","encodeURIComponent","title","webpackEmptyContext","req","code","keys","id","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","m","d","definition","o","defineProperty","enumerable","get","f","chunkId","all","reduce","promises","u","call","done","script","needAttach","scripts","getElementsByTagName","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","forEach","head","appendChild","r","Symbol","toStringTag","installedChunks","j","installedChunkData","reject","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","global","exec","cmd","execCommand","checkOutstandingSyncs","outstandingPullCount","initialized","utils","remote","app","relaunch","exit","showAlert","show","ko","applyBindings","syncInProgress","setInterval","serverAddress","protocol","host","this","step","observable","setupType","setupNewDocument","setupSyncFromDesktop","setupSyncFromServer","syncServerHost","syncProxy","password","setupTypeSelected","selectSetupType","post","back","finish","resp","hide","getElementById"],"sourceRoot":""}