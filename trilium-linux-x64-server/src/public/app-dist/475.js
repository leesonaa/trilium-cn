"use strict";(global.webpackChunktrilium=global.webpackChunktrilium||[]).push([[475],{2475:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var n=a(8481),l=a(1412),i=a(1801),d=a(3152),c=a(1736);class s{constructor(e,t){this.treeWidget=e,this.node=t}async show(e){i.Z.show({x:e.pageX,y:e.pageY,items:await this.getMenuItems(),selectMenuItemHandler:(e,t)=>this.selectMenuItemHandler(e)})}async getMenuItems(){const e=await l.default.getNote(this.node.data.noteId),t=this.node.getParent().data.noteId,a="_lbVisibleLaunchers"===e.noteId,n="_lbAvailableLaunchers"===e.noteId,i="_lbVisibleLaunchers"===t,d="_lbAvailableLaunchers"===t,c=i||d,s=!e.noteId.startsWith("_");return[a||n?{title:"添加笔记启动器",command:"addNoteLauncher",uiIcon:"bx bx-plus"}:null,a||n?{title:"添加脚本启动器",command:"addScriptLauncher",uiIcon:"bx bx-plus"}:null,a||n?{title:"添加自定义部件",command:"addWidgetLauncher",uiIcon:"bx bx-plus"}:null,a||n?{title:"添加间隔",command:"addSpacerLauncher",uiIcon:"bx bx-plus"}:null,a||n?{title:"----"}:null,{title:'删除<kbd data-command="deleteNotes"></kbd>',command:"deleteNotes",uiIcon:"bx bx-trash",enabled:s},{title:"重置",command:"resetLauncher",uiIcon:"bx bx-empty",enabled:!s&&e.isLaunchBarConfig()},{title:"----"},d?{title:"移动到可见启动器",command:"moveLauncherToVisible",uiIcon:"bx bx-show",enabled:!0}:null,i?{title:"移动到可用启动器",command:"moveLauncherToAvailable",uiIcon:"bx bx-hide",enabled:!0}:null,{title:'复制启动器 <kbd data-command="duplicateSubtree">',command:"duplicateSubtree",uiIcon:"bx bx-empty",enabled:c}].filter((e=>null!==e))}async selectMenuItemHandler({command:e}){"resetLauncher"!==e?this.treeWidget.triggerCommand(e,{node:this.node,notePath:n.Z.getNotePath(this.node),selectedOrActiveBranchIds:this.treeWidget.getSelectedOrActiveBranchIds(this.node),selectedOrActiveNoteIds:this.treeWidget.getSelectedOrActiveNoteIds(this.node)}):await d.Z.confirm(`您确定要重置"${this.node.title}"吗? 这个笔记和它的子笔记的所有数据都会丢失, 并且启动器会恢复到它原来的位置.`)&&await c.Z.post(`special-notes/launchers/${this.node.data.noteId}/reset`)}}}}]);
//# sourceMappingURL=475.js.map